<div class="body">
  <form [formGroup]="viewContact" class="">
    <!-- Header of button import and add contact -->
    <!-- <div class="container-fluid mt-3">
      <div class="row">
        <div class="col-6">
          <h1>Contacts</h1>
        </div>
        <div class="col-6 column-header">
          <button mat-flat-button class="border" style="font-size: medium; margin-right:18px"
            routerLink='/contacts/importContacts' id="impt-btn">
            <i class="fa fa-download pt-0 mr-1" aria-hidden="true"></i>
            Import</button>
          <button id="add-btn" style="font-size: medium;" mat-flat-button routerLink='/contacts/CreateContact'>
            <i class="fa fa-plus pb-1 mr-1" aria-hidden="true"></i>
            Add Contact</button>
        </div>
      </div>
    </div> -->

    <div class="d-flex mt-3 ">
      <div class="col-lg-1 mt-2">
        <h1 class="mb-0">Contacts</h1>
      </div>
      <div class="col-lg-4 ml-0">
        <mat-form-field class="w-100">
          <input class='underline' matInput (keyup)="applyFilter($event.target.value)" #input
            placeholder="Search by name/number/tags/city/company">
        </mat-form-field>
      </div>
      <div class="d-flex col-lg-4 p-0">
        <div class="col-lg-8 p-0">
          <div class="d-flex">
          <div class=" col-lg-8 pr-0 text-right">
            <label class="text-success mt-3" id="message"></label>
            <label class="text-danger mt-3" id="messages"></label>
          </div>
          <div class=" col-lg-4" style="padding-bottom: 50px;">
            <button mat-flat-button class="transbtn" style="font-size: medium;margin-left: 0px;margin-top: 0px;"
              title="Delete" (click)="DeleteData()">
              <i class="fa fa-trash fa-2x" style="width: 17px;height:20px;padding-bottom: 10px;"
                aria-hidden="true"></i>
            </button>
          </div></div>
        </div>
          <!-- </div> -->

          <!-- <div class="col-lg-1 p-0 "> -->
        <div class= "col-lg-4"> 
          <mat-form-field appearance="none" style="height: 30%;">
            <button class="transbtn mb-4 mt-0" title="Filter" mat-flat-button
              style="font-size:medium;color: #707070; cursor: pointer;margin-left: 17px;">
              <i class="fa fa-filter fa-2x pr-1 pb-3" aria-hidden="true"></i>
            </button>
            <div class="a">
              <mat-select class="mt-0">
                <div class="d-flex">
                  <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                    (change)="toggleVisibilitycontact($event)" formControlName="nameCheck" />
                  <mat-option class="w-100">Contacts</mat-option>
                </div>
                <div *ngIf="contactcheck">
                  <input style="margin-left:10px;" class="nametxt" matInput formControlName="nameFilter">
                  <!-- <input style="margin-left:10px;" type="text" /> -->
                </div>

                <div class="d-flex">
                  <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                    (change)="toggleVisibilitycity($event)" formControlName="cityCheck" />
                  <mat-option class="w-100">City</mat-option>
                </div>
                <div *ngIf="citycheck">
                  <!-- <input type="text" style="margin-left:10px;" /> -->
                  <input style="margin-left:10px;" class="nametxt" matInput formControlName="cityFilter">
                </div>

                <div class="d-flex ">
                  <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                    (change)="toggleVisibilitytag($event)" formControlName="stateCheck" />
                  <mat-option class="w-100">Tags</mat-option>
                </div>
                <div *ngIf="tagcheck" class="mb-2">
                  <!-- <input type="text" style="margin-left:10px;"  /> -->
                  <input style="margin-left:10px;" class="nametxt" matInput formControlName="stateFilter">
                </div>
                <div class="d-flex mb-2 justify-content-around">
                  <button (click)="clearFilters()" mat-flat-button id="clear-btn" class="border col-lg-4">Clear</button>
                  <button (click)="custFilters()" mat-flat-button id="apply-btn" class="border col-lg-4">Apply</button>
                </div>
              </mat-select>
            </div>

          </mat-form-field>
        </div>
      </div>
      <div class="col-lg-1 p-0">
        <!-- <button id="add-btn" class="border" style="font-size: medium; margin-right:18px;margin-left:47px;"
          mat-flat-button routerLink='/contacts/CreateContact'>
          <i class="fa fa-plus pt-0 mr-1" aria-hidden="true"></i>Add Contact</button> -->
          <button class="transbtn" style="font-size: medium;padding-left: 0px;" mat-flat-button
          title="Add Contact" routerLink='/contacts/CreateContact'>
          <i class="fa fa-plus fa-2x pb-1 mr-0" aria-hidden="true"></i>
        </button>
      </div>
      <div class="col-lg-2 p-0">
        <button mat-flat-button class="border" style="font-size: medium; margin-right:18px;margin-left: 10px;"
          routerLink='/contacts/importContacts' id="impt-btn">
          <i class="fa fa-download pt-0 mr-1" aria-hidden="true"></i>
          Import</button>
      </div>
    </div>

    <!-- <div class="d-flex justify-content-between mt-4">
      <div class="col-lg-5">
        <mat-form-field class="w-100">
          <input class='underline' matInput (keyup)="applyFilter($event.target.value)" #input
            placeholder="Search by name/number/tags/city/company">
        </mat-form-field>
      </div>
      <div class=" col-lg-3 pr-0 text-right">
        <label class="text-success mt-3" id="message"></label>
        <label class="text-danger mt-3" id="messages"></label>
      </div>
      <div class="col-lg-4 pl-0">
        <div class="d-flex w-100 justify-content-around">
  
          <div class="col-lg-5 pl-0 centr">
            <button mat-flat-button class="transbtn" style="font-size: medium;" (click)="DeleteData()">
        
              <i class="fa fa-trash" style="width: 17px;height:20px" aria-hidden="true"></i>
              <b>
                Delete
              </b>
            </button>
          </div>
 
          <div class="col-lg-5">
        

            <mat-form-field appearance="none">
              <label class="mb-0 pt-1 pr-3" style="font-size:medium;color: #707070; cursor: pointer;"><i
                  class="fa fa-filter pr-1" aria-hidden="true"></i> <b>Filter</b></label>
              <div class="a">
                <mat-select class="mt-3">
                  <div class="d-flex">
                    <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                      (change)="toggleVisibilitycontact($event)" formControlName="nameCheck" />
                    <mat-option class="w-100">Contacts</mat-option>
                  </div>
                  <div *ngIf="contactcheck">
                    <input style="margin-left:10px;" class="nametxt" matInput formControlName="nameFilter">
              
                  </div>

                  <div class="d-flex">
                    <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                      (change)="toggleVisibilitycity($event)" formControlName="cityCheck" />
                    <mat-option class="w-100">City</mat-option>
                  </div>
                  <div *ngIf="citycheck">
             
                    <input style="margin-left:10px;" class="nametxt" matInput formControlName="cityFilter">
                  </div>

                  <div class="d-flex ">
                    <input type="checkbox" style="margin-left: 10px;margin-top: 15px;" data-md-icheck
                      (change)="toggleVisibilitytag($event)" formControlName="stateCheck" />
                    <mat-option class="w-100">Tags</mat-option>
                  </div>
                  <div *ngIf="tagcheck" class="mb-2">
                    <input style="margin-left:10px;" class="nametxt" matInput formControlName="stateFilter">
                  </div>
                  <div class="d-flex mb-2 justify-content-around">
                    <button (click)="clearFilters()" mat-flat-button id="clear-btn"
                      class="border col-lg-4">Clear</button>
                    <button (click)="custFilters()" mat-flat-button id="apply-btn"
                      class="border col-lg-4">Apply</button>
                  </div>
                </mat-select>
              </div>

            </mat-form-field>
          </div>
        </div>
      </div>
    </div> -->
    <!-- <br /> -->
    <div class="contactsscreentablecss mr-3 ml-3">
      <!-- table open -->

      <table mat-table [dataSource]="dataSource" id="excel-table" matTableExporter #exporter="matTableExporter"
        class=" w-100  table-font" matSort>
        <!-- checkbox column open -->
        <!-- <ng-container matColumnDef="select"      >
        <th mat-header-cell class="pt-3 text-center" *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
            [indeterminate]="selection.hasValue() && !isAllSelected()">
          </mat-checkbox>
        </th>
        <td mat-cell class="pt-3 border-bottom text-center" *matCellDef="let row">
          <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
            [checked]="selection.isSelected(row)">
          </mat-checkbox>
        </td>
      </ng-container> -->
        <ng-container matColumnDef="select">
          <th mat-header-cell *matHeaderCellDef>
            <mat-checkbox (change)="$event ? masterToggle() : null" [checked]="selection.hasValue() && isAllSelected()"
              [indeterminate]="selection.hasValue() && !isAllSelected()">
            </mat-checkbox>
          </th>
          <td mat-cell *matCellDef="let row">
            <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
              [checked]="selection.isSelected(row)">
            </mat-checkbox>
          </td>
        </ng-container>
        <!-- checkbox column closed -->
        <!-- Name Column open-->
        <ng-container matColumnDef="first_name" style="width: 15%;">
          <th mat-header-cell class="text-center " *matHeaderCellDef> Name
          </th>
          <td mat-cell class="text-center" *matCellDef="let row"><a href=""
              [routerLink]="['/contacts/Contactsinformation',row.lm_contact_id]"><u style="color: #178DDC;">
                {{row.first_name}} </u></a> </td>
        </ng-container>
        <!-- Name Column  closed-->
        <!-- Phone No Column open-->
        <ng-container matColumnDef="phone_no" style="width: 15%;">
          <th mat-header-cell class="text-center" *matHeaderCellDef> Phone
          </th>
          <td mat-cell class="text-center" *matCellDef="let row"> {{row.phone_no}} </td>
        </ng-container>
        <!-- Phone No Column closed-->
        <!-- Email Column  open-->
        <ng-container matColumnDef="email_id" style="width: 15%;">
          <th mat-header-cell class="text-center" *matHeaderCellDef> Email
          </th>
          <td mat-cell class="text-center" *matCellDef="let row"> <a href=""
              [routerLink]="['/contacts/Contactsinformation',row.lm_contact_id]" style="text-decoration: none;"><span
                style="color: #178DDC;"> {{row.email_id}} </span></a></td>
        </ng-container>
        <!-- Email Column  closed-->
        <!-- Company Column open -->
        <ng-container matColumnDef="company_id" style="width: 15%;">
          <th mat-header-cell class="text-center" *matHeaderCellDef> Company
          </th>
          <td mat-cell class="text-center" *matCellDef="let row"> {{row.lm_company.name}} </td>
        </ng-container>
        <!-- Company Column  closed-->
        <!-- City Column open -->
        <ng-container matColumnDef="city">
          <th mat-header-cell class="text-center" *matHeaderCellDef> City
          </th>
          <td mat-cell class="text-center" *matCellDef="let row"> {{row.city}} </td>
        </ng-container>
        <!-- City Column closed -->
        <!-- Tags Column open-->
        <ng-container matColumnDef="state">
          <th mat-header-cell class="text-center" *matHeaderCellDef> Tags </th>
          <td mat-cell class="text-center" *matCellDef="let row"> {{row.state}} </td>
        </ng-container>
        <!-- Tags Column closed-->
        <!-- More Column open-->
        <ng-container matColumnDef="address">
          <th mat-header-cell class="text-center" *matHeaderCellDef> More </th>
          <td mat-cell class="text-center" *matCellDef="let row"><img src="/assets/img/more.png" class=" pl-2 " /> </td>
        </ng-container>
        <!-- More Column closed-->
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"></tr>

      </table>
      <!-- table closed -->

      <div class="d-flex justify-content-center mt-2">
        <div *ngIf="isLoading" class="loader ">
          <mat-spinner>
            color="accent"
            mode="indeterminate">
          </mat-spinner>
        </div>
      </div>
      <div class="d-flex  justify-content-between mb-3">
        <div class="col-lg-6 p-0">
          <mat-paginator #paginator [length]="paginationlength" [pageSize]="pageSize"
            [pageSizeOptions]="[10, 100, 500, 1000, 2000]" [pageIndex]="currentPage" (page)="handlePage($event)"
            [showFirstLastButtons]="true">
          </mat-paginator>
        </div>
        <div class="col-lg-2  mt-2 pr-0" id="exportcss">
          <!-- <button mat-flat-button class="p-0" > -->
          <!-- <img src="/assets/img/import.png" /> -->
          <span>Download as:</span>
          <img src="/assets/img/CSV.png" class=" pl-2 pr-2"
            (click)="exporter.exportTable('csv',{fileName:'contacts'})" />
          <!-- <i class="fa fa-download pt-1 mr-1" aria-hidden="true"  (click)="exporter.exportTable('csv')" style="width: 20px;height: 25px; "></i> -->
          <!-- </button> -->
          <!-- <button mat-flat-button class="p-0" > -->
          <img src="/assets/img/XLS.png" class=" pl-2 " (click)="exporter.exportTable('xlsx',{fileName:'contacts'})" />

          <!-- <i class="fa fa-download pt-1 mr-1" aria-hidden="true"  (click)="exporter.exportTable('xlsx')" style="width: 20px;height: 25px; "></i> -->
          <!-- </button> -->
        </div>
      </div>
    </div>
  </form>
</div>